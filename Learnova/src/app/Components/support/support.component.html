<div class="popupbtn bg-black">
  <button class="btn popup text-light w-auto" (click)="openPopup()"> Support</button>
</div>

<!-- Popup Overlay -->
@if (isPopupVisible) {
  <div class="popup-overlay" (click)="closePopup()"></div>
}

<!-- Popup Container-->
@if (isPopupVisible) {
  <div class="popup-container" data-bs-theme="dark">
    <div class="card">
      <div class="card-header text-light">
        <span class="close-btn fw-bold mb-6" (click)="closePopup()">&times;</span>
      </div>
      <div class="card-body">
        <!-- Form with Validations -->
        <form (ngSubmit)="onSubmit()" #supportForm="ngForm">
          <div class="fw-bold text-center">Leave Us a Message</div>
          <!-- Name Field with Validation -->
          <div class="mb-3">
            <label for="name" class="form-label">Name</label>
            <input type="text" class="form-control" id="name" required minlength="3" maxlength="50"
              [(ngModel)]="formData.name" name="name" #name="ngModel">
              @if (name.invalid && name.touched) {
                <div class="text-danger">
                  @if (name.errors?.['required']) {
                    <small>Name is required.</small>
                  }
                  @if (name.errors?.['minlength']) {
                    <small>Name must be at least 3 characters long.</small>
                  }
                  @if (name.errors?.['maxlength']) {
                    <small>Name cannot exceed 50 characters.</small>
                  }
                </div>
              }
            </div>
            <!-- Email Field with Validation -->
            <div class="mb-3">
              <label for="email" class="form-label">Email Address</label>
              <input type="email" class="form-control" id="email" required email
                [(ngModel)]="formData.email" name="email" #email="ngModel">
                @if (email.invalid && email.touched) {
                  <div class="text-danger">
                    @if (email.errors?.['required']) {
                      <small>Email is required.</small>
                    }
                    @if (email.errors?.['email']) {
                      <small>Enter a valid email address.</small>
                    }
                  </div>
                }
              </div>
              <!-- Message Field with Validation -->
              <div class="mb-3">
                <label for="massege" class="form-label">How Can I Help You?</label>
                <textarea class="form-control" id="massege" required minlength="10"
                [(ngModel)]="formData.massege" name="massege" #massege="ngModel"></textarea>
                @if (massege.invalid && massege.touched) {
                  <div class="text-danger">
                    @if (massege.errors?.['required']) {
                      <small>Message is required.</small>
                    }
                    @if (massege.errors?.['minlength']) {
                      <small>Message must be at least 10 characters long.</small>
                    }
                  </div>
                }
              </div>
              <!-- Submit Button with Disable State -->
              <div class="text-center">
                <button type="submit" class="btn btn-dark send-btn border popupsend w-50 form-control"
                [disabled]="supportForm.invalid" (click)="getdata()">Send</button>
              </div>
            </form>
          </div>
        </div>
      </div>
    }
